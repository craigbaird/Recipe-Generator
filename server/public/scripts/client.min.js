var myApp=angular.module("myApp",["ngRoute","ngMaterial"]);myApp.config(["$routeProvider","$locationProvider",function(a,b){b.hashPrefix(""),a.when("/home",{templateUrl:"/views/templates/home.html",controller:"LoginController"}).when("/register",{templateUrl:"/views/templates/register.html",controller:"LoginController"}).when("/user",{templateUrl:"/views/templates/user.html",controller:"UserController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/info",{templateUrl:"/views/templates/info.html",controller:"InfoController",controllerAs:"ingredients",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).otherwise({redirectTo:"home"})}]),myApp.controller("InfoController",["$scope","$http","$location","ApiService","UserService",function(a,b,c,d,e){var f=this;f.logout=e.logout,f.ingredient={};var g=function(a){console.log("ADDING INGREDIENT",a),b.post("/ingredients",a).then(function(a){h()})},h=function(){b.get("/ingredients").then(function(a){console.log("All Current Ingredients: ",a),f.list=a.data})};f.addIngredient=g,h(),a.submit=function(){console.log("submit button clicked",a.selectedIng);var b=a.selectedIng;d.getSpoonacular(b)},f.infoFromApi=d.infoFromApi;var i=function(a){console.log("hi",a),getSpoonacular2(a)};f.learnMore=i,f.infoFromApi2=d.infoFromApi2}]),myApp.factory("ApiService",["$http",function(a){var b={},c={};return{infoFromApi:b,getSpoonacular:function(c){a.get("/api/"+c).then(function(a){b.response=a.data,console.log("data from Api",a)})},infoFromApi2:c,getSpoonacular2:function(b){a.get("/api/detail/"+b).then(function(a){c.response=a.data,console.log("data from Api",a)})}}}]),myApp.controller("LoginController",["$scope","$http","$location","UserService",function(a,b,c,d){a.user={username:"",password:""},a.message="",a.login=function(){""===a.user.username||""===a.user.password?a.message="Enter your username and password!":(console.log("sending to server...",a.user),b.post("/",a.user).then(function(b){b.data.username?(console.log("success: ",b.data),c.path("/user")):(console.log("failure: ",b),a.message="Wrong!!")}))},a.registerUser=function(){""===a.user.username||""===a.user.password?a.message="Choose a username and password!":b.post("/register",a.user).then(function(a){console.log("success"),c.path("/home")},function(b){console.log("error"),a.message="Please try again."})}}]),myApp.controller("UserController",["$scope","$http","$location","UserService",function(a,b,c,d){a.userObject=d.userObject,a.logout=d.logout}]),myApp.factory("UserService",["$http","$location",function(a,b){console.log("User Service Loaded");var c={};return{userObject:c,getuser:function(){a.get("/user").then(function(a){a.data.username?(c.userName=a.data.username,console.log("User Data: ",c.userName)):b.path("/home")})},logout:function(){a.get("/user/logout").then(function(a){console.log("logged out"),b.path("/home")})}}}]);